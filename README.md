# GG Final Project Backend (Simple Tokopedia Play Clone)

This is a simple Tokopedia Play clone backend as part of my journey in Generasi Gigih 3.0 program.

## Table of Contents

- [GG Final Project Backend (Simple Tokopedia Play Clone)](#gg-final-project-backend-simple-tokopedia-play-clone)
  - [Table of Contents](#table-of-contents)
  - [Getting Started](#getting-started)
    - [Prerequisites](#prerequisites)
    - [Installation](#installation)
    - [Adding .env File to the Project](#adding-env-file-to-the-project)
    - [Running the Application](#running-the-application)
  - [Usage](#usage)
  - [Project Structure](#project-structure)
  - [Database Structure](#database-structure)
    - [Videos Collection](#videos-collection)
    - [Products Collection](#products-collection)
    - [Comments Collection](#comments-collection)
    - [Users Collection](#users-collection)
  - [Database Seeding](#database-seeding)
  - [API Endpoints List](#api-endpoints-list)

## Getting Started

These instructions will get you a copy of the project up and running on your local machine for development and testing purposes.

### Prerequisites

To run this application, you'll need the following software installed on your machine:

- Node.js
- npm (Node Package Manager)

### Installation

1. Clone the repository:

```bash
git clone https://github.com/ridhoafwani/gg-final-api.git
```

2. Install the dependencies:

```bash
npm install
```

### Adding .env File to the Project

To manage environment variables and sensitive configuration settings in your project, you can make use of a `.env` file. This file allows you to store key-value pairs, where each pair represents an environment variable.

Follow the steps below to add a `.env` file to your project:

1. **Create a New File**: In the root directory of your project, create a new file named `.env`.

2. **Define Environment Variables**: Open the `.env` file using a text editor and define your environment variables. follow the format that i provide in `.env.example`

### Running the Application

To start the Express.js API, run the following command:

```bash
npm start
```

or

```bash
npm run dev
```

for development.

The API will be available at `http://localhost:3000` (or the port specified in your env configuration).

## Usage

You can use tools like [Postman](https://www.postman.com/) or [cURL](https://curl.se/) to interact with the API endpoints. Refer to the [API Endpoints](#api-endpoints) section for more details.

## Project Structure

```plaintext
gg-final-api/
|-- node_modules/
|-- package.json
|-- .env
|-- Dockerfile
|-- src
|--|-- middleware/
|--|-- routes/
|--|-- controllers/
|--|-- services/
|--|-- models/
|--|-- validator/
|--|-- exceptions/
|--|-- seeds/
|--|-- app.js
|--|-- socket.js

```

## Database Structure

![Alt text](<readme_asset/database design.png>)

### Videos Collection

The `videos` collection represents a set of videos in your application. Each video document has the following properties:

- **`_id`**: The unique identifier for the video, automatically generated by MongoDB.
- **`title`**: A string representing the title of the video. It is a required field, ensuring that every video document has a title.
- **`url`**: A string containing the URL of the video. This field is also required, ensuring that each video document has a valid URL.
- **`thumbnail`**: A string representing the URL of the video's thumbnail. This field is required, ensuring each video has an associated thumbnail.

### Products Collection

The `products` collection represents products related to videos in your application. Each product document is associated with a specific video and has the following properties:

- **`_id`**: The unique identifier for the product, automatically generated by MongoDB.
- **`videoId`**: A reference to the corresponding video for this product. It is of type `mongoose.Schema.Types.ObjectId` and references the `videos` collection, ensuring the integrity of the relationship with videos.
- **`title`**: A string representing the title of the product. It is a required field, ensuring that every product document has a title.
- **`price`**: A number representing the price of the product. It is a required field, ensuring that each product document has a valid price.
- **`url`**: A string containing the URL of the product. This field is required, ensuring each product has an associated URL.
- **`thumbnail`**: A string representing the URL of the product's thumbnail. This field is required, ensuring each product has an associated thumbnail.

### Comments Collection

The `comments` collection represents comments made on videos in your application. Each comment document has the following properties:

- **`_id`**: The unique identifier for the comment, automatically generated by MongoDB.
- **`comment`**: A string representing the content of the comment. It is a required field, ensuring that every comment document has a comment text.
- **`userId`**: A reference to the owner or author for this comment. It is of type `mongoose.Schema.Types.ObjectId` and references the `users` collection, ensuring the integrity of the relationship with users.
- **`videoId`**: A reference to the corresponding video for this comment. It is of type `mongoose.Schema.Types.ObjectId` and references the `videos` collection, ensuring the integrity of the relationship with videos.
- **`timestamp`**: A date representing the timestamp of when the comment was made. It is a required field and defaults to the current date when not provided.

### Users Collection

The `users` collection represents users in your application. Each user document has the following properties:

- **`_id`**: The unique identifier for the user, automatically generated by MongoDB.
- **`name`**: A string representing the name of the user. It is a required field, ensuring that every user document has a name.
- **`email`**: A string representing the email address of the user. It is a unique field, ensuring that each user has a distinct email address.
- **`password`**: A secure string representing the user's password. This field is hashed and stored securely in the database to maintain user privacy.
- **`profilePictUrl`**: A string representing the URL of the user's profile picture, if available.

## Database Seeding

To facilitate the initial setup and testing of the application, a database seeding process is available. The seeding process populates the database with sample data, making it easy to evaluate and interact with the application without starting from scratch.

To perform the database seeding, follow these steps:

1. Ensure you have the project's dependencies installed by running `npm install` if you haven't already.
2. Open a terminal window in the project directory.
3. Run the following command:

   ```shell
   npm run seed
   ```

   This command will execute the database seeding process, populating the necessary tables with sample data.

Please note that this process is intended for development and testing purposes. It's essential to have a backup of your data before running the seeding command, as it will overwrite existing data in the database.

## API Endpoints List

> **Note**
> Cek All API Endpoints here : [API Endpoints List](APIEndpointsList.md)
