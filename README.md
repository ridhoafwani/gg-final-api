# GG Midterm (Simple Tokopedia Play Clone Backend)

This is a simple Tokopedia Play clone backend as part of my journey in Generasi Gigih 3.0 program.

## Table of Contents

- [Getting Started](#getting-started)
  - [Prerequisites](#prerequisites)
  - [Installation](#installation)
  - [Running the Application](#running-the-application)
- [Usage](#usage)
- [Database Structure](#database-structure)
- [API Endpoints](#api-endpoints)

## Getting Started

These instructions will get you a copy of the project up and running on your local machine for development and testing purposes.

### Prerequisites

To run this application, you'll need the following software installed on your machine:

- Node.js (version 12 or above)
- npm (Node Package Manager)

### Installation

1. Clone the repository:

```bash
git clone https://github.com/ridhoafwani/gg-midterm.git
```

2. Install the dependencies:

```bash
npm install
```

### Adding .env File to the Project

To manage environment variables and sensitive configuration settings in your project, you can make use of a `.env` file. This file allows you to store key-value pairs, where each pair represents an environment variable.

---

#### If you are GG grader, I already provide my .env file in LMS submission

---

Follow the steps below to add a `.env` file to your project:

1. **Create a New File**: In the root directory of your project, create a new file named `.env`.

2. **Define Environment Variables**: Open the `.env` file using a text editor and define your environment variables in the following format:

   ```plaintext
   PORT = your_port_value
   DATABASE_URL= your_database_url_value
   ```

   Dont porget to provide their corresponding values.

   For example:

   ```plaintext
   PORT = 3000
   DATABASE_URL= "mongodb+srv://<username>:<password>@<mongo_cloud_database_url>/?retryWrites=true&w=majority"
   ```

### Running the Application

To start the Express.js API, run the following command:

```bash
npm start
```

The API will be available at `http://localhost:3000`.

## Usage

You can use tools like [Postman](https://www.postman.com/) or [cURL](https://curl.se/) to interact with the API endpoints. Refer to the [API Endpoints](#api-endpoints) section for more details.

## API Endpoints List

Cek All API Endpoints here : [API Endpoints List](APIEndpointsList.md)

## Database Structure

![Alt text](<readme_asset/database design.png>)

### Videos Collection

The `videos` collection represents a set of videos in your application. Each video document has the following properties:

- **`_id`**: The unique identifier for the video, automatically generated by MongoDB.
- **`title`**: A string representing the title of the video. It is a required field, ensuring that every video document has a title.
- **`url`**: A string containing the URL of the video. This field is also required, ensuring that each video document has a valid URL.
- **`thumbnail`**: A string representing the URL of the video's thumbnail. This field is required, ensuring each video has an associated thumbnail.

### Products Collection

The `products` collection represents products related to videos in your application. Each product document is associated with a specific video and has the following properties:

- **`_id`**: The unique identifier for the product, automatically generated by MongoDB.
- **`videoId`**: A reference to the corresponding video for this product. It is of type `mongoose.Schema.Types.ObjectId` and references the `videos` collection, ensuring the integrity of the relationship with videos.
- **`title`**: A string representing the title of the product. It is a required field, ensuring that every product document has a title.
- **`price`**: A number representing the price of the product. It is a required field, ensuring that each product document has a valid price.
- **`url`**: A string containing the URL of the product. This field is required, ensuring each product has an associated URL.

### Comments Collection

The `comments` collection represents comments made on videos in your application. Each comment document has the following properties:

- **`_id`**: The unique identifier for the comment, automatically generated by MongoDB.
- **`comment`**: A string representing the content of the comment. It is a required field, ensuring that every comment document has a comment text.
- **`username`**: A string representing the username of the commenter. It is a required field, ensuring that every comment document has a username associated with it.
- **`videoId`**: A reference to the corresponding video for this comment. It is of type `mongoose.Schema.Types.ObjectId` and references the `videos` collection, ensuring the integrity of the relationship with videos.
- **`timestamp`**: A date representing the timestamp of when the comment was made. It is a required field and defaults to the current date when not provided.

### Users Collection

The `users` collection represents users in your application. Each user document has the following properties:

- **`_id`**: The unique identifier for the user, automatically generated by MongoDB.
- **`name`**: A string representing the name of the user. It is a required field, ensuring that every user document has a name.
- **`email`**: A string representing the email address of the user. It is a unique field, ensuring that each user has a distinct email address.
- **`profilePictUrl`**: A string representing the URL of the user's profile picture, if available.

#### Please note:

- The collections have an `_id` field by default, provided by MongoDB.
- The collection names are explicitly defined when creating the Mongoose models (i.e., 'videos', 'products', 'comments', 'users').

#### Additionally:

- The `comments` collection is not directly connected to the `users` collection, as per the project requirements we should provide name in the payload when doing comment so assume its not connected to each other.
- `users` collection will be use when the app need authentication on next project
